<form class="form-horizontal well" name="cliente" id="nuevoCliente" action="@{ClientesController.nuevoCliente()}" method="post">
    <fieldset>
        <legend>Registro de Nuevo Cliente &nbsp;<i class="fa fa-user"></i></legend>
        <div class="row">
            <div class="form-group col-md-6">
                <label class="col-md-4 control-label" for="nombres">Nombres :</label>
                <div class="col-md-8">
                    <input id="nombres" name="cliente.nombres" type="text" placeholder="Nombres" class="form-control input-md">
                </div>
            </div>
            <div class="form-group col-md-6">
                <label class="col-md-4 control-label" for="rut">R.U.T :</label>

                <div class="col-md-8">
                    <input id="rut" name="cliente.rut" type="text" placeholder="Rut" class="form-control input-md" >
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-6">
                <label class="col-md-4 control-label" for="apellidoMaterno">Apellido Materno:</label>

                <div class="col-md-8">
                    <input id="apellidoMaterno" name="cliente.apellidoMaterno" type="text" placeholder="Apellido Materno"
                           class="form-control input-md">

                </div>
            </div>
            <div class="form-group col-md-6">
                <label class="col-md-4 control-label" for="apellidoPaterno">Apellido Paterno: </label>

                <div class="col-md-8">
                    <input id="apellidoPaterno" name="cliente.apellidoPaterno" type="text" placeholder="Apellido Paterno"
                           class="form-control input-md">

                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-6">
                <label class="col-md-4 control-label" for="fechaNacimiento">Fecha de Nacimiento:</label>

                <div class="col-md-8">
                    <input id="fechaNacimiento" name="fechaNacimiento" type="text" placeholder=""
                           class="form-control input-md datepicker" >

                </div>
            </div>
            <div class="form-group col-md-6">
                <label class="col-md-4 control-label" for="sexo">Sexo:</label>

                <div class="col-md-4">
                    <div class="radio">
                        <label for="sexo-0">
                            <input type="radio" name="cliente.genero" id="sexo-0" value="0" checked="checked">
                            Masculino
                        </label>
                    </div>
                    <div class="radio">
                        <label for="sexo-1">
                            <input type="radio" name="cliente.genero" id="sexo-1" value="1">
                            Femenino
                        </label>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-6">
                <label class="col-md-4 control-label" for="region">Region:</label>
                <div class="col-md-8">
                    <select id="region" name="region" class="form-control">
                        <option value="">Seleccione..</option>
                        #{list items:regiones, as:'region'}
                            <option value="${region.id}">${region.nombre}</option>
                        #{/list}
                    </select>
                </div>
            </div>
            <div class="form-group col-md-6">
                <label class="col-md-4 control-label" for="provincia">Provincia:</label>
                <div class="col-md-8">
                    <select id="provincia" name="provincia"  class="form-control">
                        <option value="">Seleccione..</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-6">
                <label class="col-md-4 control-label" for="comuna">Comuna:</label>

                <div class="col-md-8">
                    <select id="comuna" name="cliente.comuna" class="form-control">
                        <option value="">Seleccione..</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-9 col-md-pull-1">
                <label class="col-md-4 control-label" for="direccion">Direcci칩n:</label>
                <div class="col-md-8">
                    <input id="direccion" name="cliente.direccion" type="text" placeholder="Direcci칩n" class="form-control input-md">
                </div>
            </div>
            <div class="col-md-3">
            </div>
        </div>
        <div class="row">
                <div class="form-group col-md-6">
                    <label class="col-md-4 control-label" for="telefono">Telefono:</label>

                    <div class="col-md-8">
                        <input id="telefono" name="cliente.telefono" type="text" placeholder="Telefono" class="form-control input-md">
                    </div>
                </div>
            <div class="form-group col-md-6">
                <label class="col-md-4 control-label" for="celular">Celular:</label>

                <div class="col-md-8">
                    <input id="celular" name="cliente.celular" type="text" placeholder="Celular" class="form-control input-md">

                </div>
            </div>
        </div>
        *{<legend>Usuario/Contrase침a</legend>
        <div class="form-group">
            <label class="col-md-4 control-label" for="usuario">Usuario:</label>

            <div class="col-md-5">
                <input id="usuario" name="usuario" type="text" placeholder="Usuario" class="form-control input-md">

            </div>
        </div>
        <div class="form-group">
            <label class="col-md-4 control-label" for="password">Contrase침a:</label>

            <div class="col-md-5">
                <input id="password" name="password" type="password" placeholder="Password" class="form-control input-md">
            </div>
        </div>}*
        <div class="row">
            <div class="col-md-4">
            </div>
            <div class="form-group col-md-8 col-md-push-1">
                <label class="col-md-4 control-label" for="cancelar"></label>
                <div class="col-md-8">
                    <button type="button" id="cancelar" name="cancelar" class="btn btn-danger"><i class="fa fa-times"></i>&nbsp;Cancelar</button>
                    <button type="submit" id="registrar" name="registrar" class="btn btn-success">Guardar <i class="fa fa-check"></i></button>
                </div>
            </div>
        </div>

    </fieldset>
</form>
#{i18n /}
<script type="text/javascript">

    $('#fechaNacimiento').datepicker({
        endDate: "0",
        language: 'es',
        autoclose: true
    });

    $("#celular,#telefono").keypress(function (e){
        var charCode = (e.which) ? e.which : e.keyCode;
        if (charCode > 31 && (charCode < 48 || charCode > 57)) {
            return false;
        }
    });

    $("#registrar").click(function(){
        bootbox.confirm(i18n('nuevoCliente'),function(result){
            if(result){
                console.log("puta la wea");
                $("#nuevoCliente").submit();
            }
        });

    });

    $("#region").change(function(){
       var idRegion = $("#region").val();
       var selectProvincia = $("#provincia");
       var selectComuna = $("#comuna");
        if(idRegion == ''){
            selectProvincia.empty();
            selectComuna.empty();
            selectProvincia.append($('<option>').text("Seleccione..").attr('value', ''));
            selectComuna.append($('<option>').text("Seleccione..").attr('value', ''));
        }
        $.ajax({
            url: "provincias/"+idRegion,
            method: "GET",
            success: function(provincias){
                selectProvincia.empty();
                selectProvincia.append($('<option>').text("Seleccione..").attr('value', ''));
                $.each(provincias,function(k,value){
                    selectProvincia.append($('<option>').text(value.nombre).attr('value', value.id));
                });
            }
        });
    });

    $("#provincia").change(function(){
        var idProvincia = $("#provincia").val();
        var selectComuna = $("#comuna");
        if(idProvincia == ''){
            selectComuna.empty();
            selectComuna.append($('<option>').text("Seleccione..").attr('value', ''));
        }
        $.ajax({
            url: "comunas/"+idProvincia,
            method: "GET",
            success: function(comunas){
                selectComuna.empty();
                $.each(comunas,function(k,value){
                    selectComuna.append($('<option>').text(value.nombre).attr('value',value.id));
                });
            }
        });
    });
    $("#rut").Rut({
        on_error: function(){
            bootbox.alert("Rut no valido",function(){
                $("#rut").val('');
            });
        }
    });

</script>